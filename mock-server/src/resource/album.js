const MemoryCountResourceBuilder = require("./memoryCount");
const resourceUtil = require("./resourceUtil");

module.exports = class AlbumResourceBuilder {
  constructor() {
    this.albumId = 1;
    this.title = "hogehoge";
    this.memories = [];
    this.memoryCount = new MemoryCountResourceBuilder().build();
  }

  build() {
    return {
      album_id: this.albumId,
      title: this.title,
      memories: {
        memories: this.memories,
        memory_count: new MemoryCountResourceBuilder()
          .withMemoriesCount(this.memories.length)
          .withPublichedCount(this.memories.length)
          .build()
      }
    };
  }

  withAlbumId(id) {
    this.albumId = id;
    return this;
  }

  wishTitle(title) {
    this.title = title;
    return this;
  }

  /**
   * buildした配列を引数に取ります
   * @param {*} memories 
   */
  withMemories(memories) {
    this.memories = memories;
    return this;
  }

  /**
   * 指定された数だけmemoryを生成
   * 
   * @param {Number} count
   */
  withAutoGeneratedMemories(count) {
    this.memories = resourceUtil.autoGenerateMemories(count);
    return this;
  }

  appendMemory(memory) {
    this.memories.push(memory);
    return this;
  }
};